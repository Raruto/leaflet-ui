!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t="https://unpkg.com/";Promise.all([import(t+"leaflet-i18n"),import(t+"leaflet-rotate"),import(t+"leaflet.locatecontrol"),import(t+"leaflet.fullscreen"),import(t+"leaflet-pegman"),import(t+"@raruto/leaflet-gesture-handling"),import(t+"@raruto/leaflet-edit-osm"),import(t+"leaflet-control-layers-inline"),import(t+"leaflet-minimap"),import(t+"leaflet-loading"),import(t+"leaflet-search"),import(t+"leaflet-easyprint"),import(t+"leaflet.control.resizer"),import(t+"leaflet.visualclick")]).then((()=>{!function(){let t=L.i18n.bind({});L.i18n=L._=(e,o)=>(L.locale&&L.locales[L.locale]&&""==L.locales[L.locale][e]&&(L.locales[L.locale][e]="â€‹"),t.call(null,e,o))}(),function(){const t=document.currentScript,e="0.5.5+master.f634be9e".split("+")[0].trim();let o={baseURL:"https://unpkg.com/",loadSyncScripts:function(t){return t.reduce(((t,e)=>t.then((()=>o.loadAsyncScripts(e)))),Promise.resolve())},loadAsyncScripts:function(t){return Promise.all(t.map((t=>o.loadScript(t))))},loadScript:function(e){return new Promise(((a,i)=>{let n=e.split(".").pop().split("?")[0],r="css"==n?"link":"script",l=document.createElement(r),s=document.head,p=(s.contains(t)?t:s.lastChild)||s,m=o["prev_"+r]||("script"==r&&o.prev_link?o.prev_link:p),h=0===e.indexOf(".")||0===e.indexOf("/")||0===e.indexOf("http://")||0===e.indexOf("https://")?"":o.baseURL;"css"==n&&(l.rel="stylesheet"),l.addEventListener("load",a,{once:!0}),l.setAttribute("css"==n?"href":"src",h+e),m.parentNode&&m.nextSibling?m.parentNode.insertBefore(l,m.nextSibling):s.appendChild(l),o["prev_"+r]=l}))}},a={mapTypes:{atlas:{name:"Atlas",url:"https://{s}.tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png",options:{maxZoom:24,maxNativeZoom:22,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Map style: &copy; <a href="http://www.thunderforest.com/">Thunderforest</a>'}},streets:{name:"Streets",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:24,maxNativeZoom:19,attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}},cycle:{name:"Cycle",url:"https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png",options:{maxZoom:24,maxNativeZoom:22,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Map style: &copy; <a href="http://www.thunderforest.com/">Thunderforest</a>'}},terrain:{name:"Terrain",url:"https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png",options:{maxZoom:24,maxNativeZoom:22,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Map style: &copy; <a href="http://www.thunderforest.com/">Thunderforest</a>'}},satellite:{name:"Satellite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:24,maxNativeZoom:18,attribution:'Map data: &copy; <a href="http://www.esri.com/">Esri</a> &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'}},topo:{name:"Topo",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:24,maxNativeZoom:17,attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}}},zoomControl:{position:"bottomright"},rotateControl:{position:"bottomright"},scaleControl:{width:200,position:"bottomright",imperial:!1},pegmanControl:{position:"bottomright",theme:"leaflet-pegman-v3-small"},locateControl:{position:"bottomright"},fullscreenControl:{position:"topright",title:"Enter Fullscreen",titleCancel:"Exit Fullscreen",forceSeparateButton:!0},layersControl:{inline:!0,position:"topleft"},minimapControl:{position:"bottomleft",toggleDisplay:!1,toggleMapTypes:!0,width:75,height:75,aimingRectOptions:{color:"#000000",weight:1,opacity:0,fillOpacity:0},shadowRectOptions:{color:"#000000",weight:1,opacity:0,fillOpacity:0},mapOptions:{mapTypeId:"satellite",gestureHandling:!1,searchControl:!1,loadingControl:!1,_isMiniMap:!0,rotateControl:!1}},editInOSMControl:{position:"bottomright"},loadingControl:{separate:!0,position:"bottomright"},searchControl:{url:"https://nominatim.openstreetmap.org/search?format=json&accept-language={querylang}&q={s}",querylang:"en-US",detectUserLang:!0,jsonpParam:"json_callback",propertyName:"display_name",propertyLoc:["lat","lon"],markerLocation:!0,autoType:!1,autoCollapse:!0,firstTipSubmit:!0,minLength:1,zoom:10,position:"bottomright"},printControl:{position:"bottomright",hideControlContainer:!0,exportOnly:!0,sizeModes:["A4Portrait","A4Landscape"]},resizerControl:{direction:"s"},disableDefaultUI:!1,plugins:[],_isMiniMap:!1};function i(){this.zoomControl&&this.zoomControl.remove(),this.rotateControl&&this.rotateControl.remove(),this.fullscreenControl&&this.options.fullscreenControl&&!this.options.zoomControl&&this.fullscreenControl.remove(),this.searchControl&&this.options.searchControl&&this.searchControl.remove(),this.attributionControl&&this.attributionControl.remove()}function n(){let t=this.options;for(let e in a)!0===t[e]||void 0===t[e]?t[e]=a[e]:"object"==typeof this.options[e]&&t[e]instanceof Array==!1&&(t[e]=c(a[e],t[e]));t.apiKeys&&(t.apiKeys.thunderforest&&(t.mapTypes.atlas.options.apikey=t.apiKeys.thunderforest,t.mapTypes.terrain.options.apikey=t.apiKeys.thunderforest,t.mapTypes.cycle.options.apikey=t.apiKeys.thunderforest),t.apiKeys.google&&(t.pegmanControl.apiKey=t.apiKeys.google));for(let e of["atlas","terrain","cycle"])t.mapTypes[e].options.apikey&&-1===t.mapTypes[e].url.indexOf("apikey=")&&(t.mapTypes[e].url+=(-1===t.mapTypes[e].url.indexOf("?")?"?":"&")+"apikey={apikey}");!1===t.mapTypeIds.includes(t.mapTypeId)&&t.mapTypeIds.length>0&&(t.mapTypeId=t.mapTypeIds[0]),t.searchControl&&t.searchControl.detectUserLang&&(t.searchControl.querylang=window.navigator.languages?window.navigator.languages[0]:window.navigator.userLanguage||window.navigator.language),t.searchControl&&t.searchControl.querylang&&(t.searchControl.url=t.searchControl.url.replace("{querylang}",t.searchControl.querylang)),!t.minimapControl||t.center||t.zoom||this.setView([0,0],0)}function r(){let t={},a={},i={},n=this.options;n.gestureHandling&&this.gestureHandling.enable();for(let t in n.mapTypeIds){let e=n.mapTypeIds[t];n.mapTypes[e]&&(i[n.mapTypes[e].name]=a[e]=new L.TileLayer(n.mapTypes[e].url,n.mapTypes[e].options),a[e].mapTypeId=e)}if(this._lastMapTypeId=n.mapTypeId,this._prevMapTypeId=n.mapTypeId,this.on("baselayerchange",(function(t){t&&t.layer&&t.layer.mapTypeId&&(this._prevMapTypeId=this._lastMapTypeId,this._lastMapTypeId=t.layer.mapTypeId)})),this.on("baselayerchange",(function(t){t&&t.layer&&t.layer.mapTypeId&&t.layer.bringToBack&&t.layer.bringToBack()})),n.layersControl&&(t.layers=new L.Control.Layers(i,null,n.layersControl),this.on("zoomend",s,this)),n.attributionControl&&this.attributionControl&&(this.attributionControl.addTo(this),t.attribution=this.attributionControl,this.on("baselayerchange",L.bind(l,this,this.attributionControl.options.prefix))),n.editInOSMControl&&(t.editInOSM=new L.Control.EditInOSM(n.editInOSMControl)),n.scaleControl&&(t.scale=new L.Control.Scale(n.scaleControl)),n.zoomControl&&this.zoomControl&&(this.zoomControl.setPosition(n.zoomControl.position),this.zoomControl.addTo(this),t.zoom=this.zoomControl),n.rotateControl&&this.rotateControl&&(this.rotateControl.setPosition(n.rotateControl.position),this.rotateControl.addTo(this),t.rotate=this.rotateControl),n.pegmanControl&&(t.pegman=new L.Control.Pegman(n.pegmanControl)),n.locateControl&&(t.locate=new L.Control.Locate(n.locateControl)),n.searchControl&&(t.search=this.searchControl=new L.Control.Search(n.searchControl)),n.printControl&&(t.print=new L.Control.EasyPrint(n.printControl)),n.loadingControl&&(t.loading=new L.Control.Loading(n.loadingControl)),n.fullscreenControl&&(t.fullscreen=this.fullscreenControl=new L.Control.FullScreen(n.fullscreenControl)),n.minimapControl){let e=n.minimapControl.mapOptions.mapTypeId,o=n.mapTypes[e];o&&(o=new L.TileLayer(o.url,o.options),o.mapTypeId=e,t.minimap=new L.Control.MiniMap(o,n.minimapControl),t.minimap._mainMapBaseLayers=i)}n.resizerControl&&(t.resizer=new L.Control.Resizer(n.resizerControl));for(let e in t)t[e].addTo&&t[e].addTo(this);if(this.controls=t,this.whenReady((function(){if(this.fire("idle"),n.mapTypeId){let t=n.mapTypes[n.mapTypeId];if(t&&i[t.name]){n.layers=n.layers.filter((e=>e._leaflet_id!==i[t.name]._leaflet_id));let e=i[t.name];e.setZIndex?e.setZIndex(0):e.bringToBack&&e.bringToBack()}}}),this),n.mapTypeId){let t=n.mapTypes[n.mapTypeId];t&&i[t.name]&&n.layers.unshift(i[t.name])}if(n.plugins){if(!o.loader){let t=[];if(n.includeLeafletUICSS&&t.unshift("leaflet-ui@"+e+"/dist/leaflet-ui.css"),window.L){if(n.includeLeafletCSS&&L.version){let e="leaflet@"+L.version+"/dist/leaflet.css",o=!1;for(let t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].href&&document.styleSheets[t].href.indexOf(e)>0){o=!0;break}o||t.unshift(e)}}else t.unshift("leaflet@1.3.4/dist/leaflet.css"),t.unshift("leaflet@1.3.4/dist/leaflet.js");o.loader=o.loadSyncScripts([t,n.plugins])}if(this._initHooks){let t=this._initHooks.length;this.once("plugins_loaded",(function(){if(t<this._initHooks.length)for(let e=t,o=this._initHooks.length;e<o;e++)this._initHooks[e].call(this);this.fire("initHooks_called")}))}o.loader.then((()=>this.fire("plugins_loaded")))}}function l(t,e){e&&e.layer&&this.attributionControl.setPrefix(!(L.GridLayer.GoogleMutant&&e.layer instanceof L.GridLayer.GoogleMutant)&&t)}function s(t){let e=this.getZoom(),o=this.controls.layers,a=o._layerControlInputs;for(let t in a){let i=a[t],n=o._getLayer(i.layerId).layer;if("satellite"==n.mapTypeId){if(e>=18&&!n._map&&!n._isAutoToggled){n._isAutoToggled=!0,i.click();break}if(e<18&&n._map&&n._isAutoToggled){for(let t in a){let e=a[t];if(o._getLayer(e.layerId).layer.mapTypeId==this._prevMapTypeId){e.click();break}}n._isAutoToggled=!1;break}if(e<18&&!n._map&&n._isAutoToggled){n._isAutoToggled=!1;break}}}}L.Map.mergeOptions({mapTypeId:"streets",mapTypeIds:["streets","terrain","satellite","topo"],mapTypes:void 0,gestureHandling:!0,visualClick:!0,zoomControl:!0,scaleControl:!0,pegmanControl:!0,locateControl:!0,fullscreenControl:!0,layersControl:!0,minimapControl:!0,editInOSMControl:!0,loadingControl:!0,searchControl:!0,printControl:!1,resizerControl:!1,disableDefaultUI:!1,includeLeafletCSS:!0,includeLeafletUICSS:!0,apiKeys:void 0,_isMiniMap:!1}),L.Map.addInitHook((function(){i.call(this),this.options._isMiniMap||this.options.disableDefaultUI||(n.call(this),r.call(this))}));let p=L.Control.MiniMap.prototype.onAdd;function m(t,e){return t.some((t=>e.includes(t)))}function h(t){return t&&"object"==typeof t&&!Array.isArray(t)}function c(t,...e){if(!e.length)return t;const o=e.shift();if(h(t)&&h(o))for(const e in o)h(o[e])?(t[e]||Object.assign(t,{[e]:{}}),c(t[e],o[e])):Object.assign(t,{[e]:o[e]});return c(t,...e)}L.Control.MiniMap.include({onAdd:function(t){let e=p.call(this,t);return this._miniMap&&(this._miniMap.doubleClickZoom.disable(),this._miniMap.touchZoom.disable(),this._miniMap.scrollWheelZoom.disable()),this.options.toggleMapTypes&&(L.DomEvent.on(t,"baselayerchange",this._handleMainMapTypeChange,this),L.DomEvent.on(this._container,"click",this._handleMiniMapTypeToggle,this)),e},_handleMainMapTypeChange:function(t){if(!this._handligMiniMapTypeToggle&&t&&t.layer){let e=this,o=this._mainMap,a=e._layer.mapTypeId,i=t.layer.mapTypeId;if(o.options.mapTypeIds.length>0&&m(o.options.mapTypeIds,i)){let t,n;i!=a&&(e._lastMapTypeId=i),"satellite"==i&&"satellite"==a?t=e._lastMapTypeId:"satellite"!=i&&"satellite"!=a&&(t="satellite"),n=o.options.mapTypes[t],n&&(n=new L.TileLayer(n.url,n.options),n.mapTypeId=t,e._lastMapTypeId=a,e.changeLayer(n))}}},_handleMiniMapTypeToggle:function(){if(this._handligMiniMapTypeToggle=!0,this._layer&&this._mainMapBaseLayers){let t,e=this,o=this._mainMap,a=this._layer.mapTypeId;for(let e in this._mainMapBaseLayers)if(o.hasLayer(this._mainMapBaseLayers[e])&&a!=this._mainMapBaseLayers[e].mapTypeId){t=this._mainMapBaseLayers[e].mapTypeId;break}if(o.options.mapTypeIds.length>0&&m(o.options.mapTypeIds,a)){let t,i;if(t=e._lastMapTypeId||o.options.mapTypeId,"satellite"!=e._lastMapTypeId&&"satellite"!=a&&(t="satellite"),i=o.options.mapTypes[t],i){i=new L.TileLayer(i.url,i.options),i.mapTypeId=t,e._lastMapTypeId=a,e.changeLayer(i);for(let t in this._mainMapBaseLayers)this._mainMapBaseLayers[t].remove(),e._lastMapTypeId==this._mainMapBaseLayers[t].mapTypeId&&this._mainMapBaseLayers[t].addTo(o)}}this._handligMiniMapTypeToggle=!1}}})}()}))}));
//# sourceMappingURL=leaflet-ui.js.map
